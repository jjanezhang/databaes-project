
{% extends "base.html" %}

{% block content %}
<br> <br>

<link rel="stylesheet" href="{{ url_for('static', filename='css/view_product.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/reviews.css') }}">

    <h3> Reviews for this seller </h3>
<table class='table table-hover table-bordered container'>
    <thead class="thead-dark">
      <tr>
        <th scope="col"> Reviewer </th>
        <th scope="col"> Review </th>
        <th scope="col"> Was this review helpful? </th>
      </tr>
    </thead>
    <tbody>
      {% for rn in reviews_and_names %}
      {% set num_upvotes= num_upvotes_list[loop.index-1] %}
        {% if rn['review'] !="" %}
        <tr>
          <th scope="row">{{rn['firstname']}} &#160 {{rn['lastname']}}</th>
        {% if rn['uid'] ==current_user.id %}
        <td> Review: {{rn['review']}}     
          <form action="{{ url_for('index.display_reviews', product_name=pname) }}" method="post">
          <input class="addRatingButton" placeholder="Type Something .." 
            type="text" name="review"/>
          <input class="viewProductButton" type="submit" value="Submit" />
          </form>
          <div class="flashMessages" id="hideMe">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <ul class="flashes">
                    {% for message in messages %}
                        {{ message }}
                    {% endfor %}
                    </ul>
                {% endif %} 
            {% endwith %}
            </div>
      </td>
        {% else %}
            <td> Review: {{rn['review']}} </td>
        {% endif %}
        {% if rn['uid'] != current_user.id %}
          <td> Upvotes: {{num_upvotes}} 
            <form action="{{ url_for('index.display_reviews', product_name=pname) }}" method="post">
            <input class="upvoteButton" type="submit" name="upvote" value="Upvote" />
          </form>
          </td>
          {% else %}
          <td> Upvotes: {{num_upvotes}}  </td>
        {% endif %}
        </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>

{% endblock %} 